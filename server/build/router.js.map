{"version":3,"sources":["../src/router.js"],"names":["router","app","get","req","res","send","redirect","params","id","use"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA,IAAMA,SAAS,SAATA,MAAS,CAACC,GAAD,EAAS;AACtBA,MAAIC,GAAJ,CAAQ,OAAR,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BA,QAAIC,IAAJ,CAAS,IAAT;AACD,GAFD;AAGA;AACAJ,MAAIC,GAAJ,CAAQ,sBAAR,EAAgC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5CA,QAAIE,QAAJ,gBAA0BH,IAAII,MAAJ,CAAWC,EAArC;AACD,GAFD;AAGA;AACAP,MAAIQ,GAAJ,CAAQ,WAAR;AACAR,MAAIQ,GAAJ,CAAQ,cAAR;AACAR,MAAIQ,GAAJ,CAAQ,eAAR;AACAR,MAAIQ,GAAJ,CAAQ,UAAR;AACAR,MAAIQ,GAAJ,CAAQ,UAAR;AACAR,MAAIQ,GAAJ,CAAQ,cAAR;AACAR,MAAIQ,GAAJ,CAAQ,cAAR;AACAR,MAAIQ,GAAJ,CAAQ,WAAR;AACAR,MAAIQ,GAAJ,CAAQ,aAAR;AACA;AACAR,MAAIQ,GAAJ;AACAR,MAAIQ,GAAJ;AACD,CArBD;;kBAuBeT,M","file":"router.js","sourcesContent":["import userRouter from './lib/user/router'\nimport contentRouter from './lib/content/router'\nimport categoryRouter from './lib/category/router'\nimport tagRouter from './lib/tag/router'\nimport appRouter from './lib/app/router'\nimport messageRouter from './lib/message/router'\nimport commentRouter from './lib/comment/router'\nimport fileRouter from './lib/file/router'\n\nimport { handler404, handlerError } from './middleware/error'\n\nconst router = (app) => {\n  app.get('/ping', (req, res) => {\n    res.send('ok')\n  })\n  // file\n  app.get('/i/:id([0-9a-f]{24})', (req, res) => {\n    res.redirect(`/api/file/${req.params.id}`)\n  })\n  // api\n  app.use('/api/user', userRouter)\n  app.use('/api/content', contentRouter)\n  app.use('/api/category', categoryRouter)\n  app.use('/api/tag', tagRouter)\n  app.use('/api/app', appRouter)\n  app.use('/api/message', messageRouter)\n  app.use('/api/comment', commentRouter)\n  app.use('/api/file', fileRouter)\n  app.use('/api/wechat', fileRouter)\n  // error\n  app.use(handler404)\n  app.use(handlerError)\n}\n\nexport default router\n"]}